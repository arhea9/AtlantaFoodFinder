<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="{% static 'restaurants/profile.css' %}" />
</head>

<body>
    <section class="profile">
        <div class="flexColumn">
            <div class="logo-container">
                <a href="{% url 'mapview' %}">
                    <img class="logo" src="{% static 'restaurants/images/logo.png' %}" alt="atl food finder" />
                </a>
            </div>

            <div class="contentBoxMain">
                <div class="flexColumn1">
                    <div class="flexColumn2">

                        <!-- Profile View Mode -->
                        <div id="profileView" class="flexColumn3">
                            <div class="flexRow1">
                                <!-- Return Link in View Mode -->
                                <a href="{% url 'mapview' %}" class="subtitle"> &lt; return</a>

                                <!-- Edit Profile Button in View Mode -->
                                <button id="editProfileButton" class="editProfileButton" onclick="toggleEditMode()">
                                    <p class="editButtonText">edit profile</p>
                                    <img class="editButtonIcon" src="{% static 'restaurants/images/edit_icon.png' %}" alt="edit profile" />
                                </button>
                            </div>

                            <div class="flex-row2">
                                <div class="profile_picture_wrapper">
                                    <img id="profilePicture" class="profile_picture" src="{% static 'restaurants/images/default-profile.jpg' %}" alt="Profile Picture" />
                                </div>
                                <h2 class="fullNameTitle">{{ user.first_name }} {{ user.last_name }}</h2>
                                <p class="usernameHighlight">{{ user.username }}</p>
                            </div>
                        </div>

                        <!-- Profile Edit Mode (Initially Hidden) -->
                        <div id="profileEdit" class="flexColumn3" style="display: none;">
                            <div class="flexRow1">
                                <!-- Cancel Button in Edit Mode -->
                                <button id="cancelButton" class="editProfileButton" onclick="toggleEditMode()">
                                    <p class="editButtonText">cancel</p>
                                </button>

                                <!-- Save Profile Button in Edit Mode -->
                                <button id="saveProfileButton" class="editProfileButton" onclick="saveProfile()">
                                    <p class="editButtonText">save</p>
                                </button>
                            </div>

                            <div class="flex-row2">
                                <div class="profile_picture_wrapper">
                                    <img id="profilePicture" class="profile_picture" src="{% static 'restaurants/images/default-profile.jpg' %}" alt="Profile Picture" />
                                </div>

                                <!-- First and Last Name Side by Side -->
                                <div class="flex_row1">
                                    <div class="input_wrapper">
                                        <label for="first_name" class="highlight"></label>
                                        <input type="text" id="first_name" name="first_name" required placeholder="first name" />
                                    </div>
                                    <div class="input_wrapper">
                                        <label for="last_name" class="highlight"></label>
                                        <input type="text" id="last_name" name="last_name" required placeholder="last name" />
                                    </div>
                                </div>

                                <!-- Username Centered Below -->
                                <div class="input_wrapper">
                                    <label for="username" class="highlight"></label>
                                    <input type="text" id="username" name="username" required placeholder="username" />
                                </div>
                            </div>
                        </div>

                        <!-- Favorites Section -->
                        <div class="restaurant-list">
                            <section class="favorites-section">
                                <header class="favorites-header">
                                    <h2 class="favoritesTitle">my favorites</h2>
                                </header>
                                <div id="favorites-list" class="favorites-list">
                                    <!-- Favorite Restaurants will be injected here by JavaScript -->
                                </div>
                            </section>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        function toggleEditMode() {
            const profileView = document.getElementById('profileView');
            const profileEdit = document.getElementById('profileEdit');

            if (profileEdit.style.display === 'none') {
                profileView.style.display = 'none';
                profileEdit.style.display = 'block';
            } else {
                profileView.style.display = 'block';
                profileEdit.style.display = 'none';
            }
        }

        function saveProfile() {
            const firstName = document.getElementById('first_name').value;
            const lastName = document.getElementById('last_name').value;
            const username = document.getElementById('username').value;

            // Add your logic to save the profile changes here

            // Update the display with new values
            document.querySelector('.fullNameTitle').textContent = `${firstName} ${lastName}`;
            document.querySelector('.usernameHighlight').textContent = username;

            // Toggle back to view mode
            toggleEditMode();
        }
    </script>
</body>
</html>
